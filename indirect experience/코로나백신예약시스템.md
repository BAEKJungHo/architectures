# 코로나 백신 예약 시스템 

한 중소 SI 업체에서 `코로나 백신 예약 시스템`을 개발 했다. 14억 짜리 사업이었으며, 결과는 참담했다.

문제는 다음과 같았다.

- 검증을 클라이언트에서만 실시 -> 서버 검증 X 
- 예약 대상자가 1000 ~ 2000 만 정도 되는데 서버 부하를 제대로 고려하지 않은 아키텍처 설계
- 기타 등등

그 중 `서버 부하`에 따른 문제가 가장 심각 했다.

따라서 국가에서 `네이버, LG C&S, 카카오 등` 여러 대기업에게 문제 해결을 요청하였으며, LG C&S 아키텍처 최적화팀이 2021.07.23일 질병관리청의 긴급 지원 요청 이후 5일 동안 분석에 
착수해 예약 서비스 병목 현상 90% 이상을 개선했다고 한다.

접속자가 본인인증과 예약을 시도하면 시스템 내에서 접속자 정보와 예약 관련 데이터를 신속하게 찾아내야 하는데, 
이 과정에서 __병원 목록·예약가능일자 등을 조회하는 데이터베이스 병목이 가장 큰 걸림돌__ 로 드러났다.

이 부분으로 알 수 있는 점은, 언어 적인 한계 때문에 성능이 안나오는 것이 아니라, __대부분의 부하 문제는 데이터를 가져오고 처리하는 것 즉, 데이터 처리__ 에 대한 문제임을 알 수 있다.

이에 성능 최적화 작업으로 부하를 기존의 10 분의 1 수준으로 낮추고 `각종 네트워크·서버도 증설·재구성`했다고 회사 측은 설명했다.

이런 작업을 통해 백신 예약 시스템의 시간당 접속자 수는 이전 30 만명에서 200 만명 이상으로 늘어났다.

위 와 같은 간접 경험을 통해서 알 수 있는 것은 사용자가 많은 서비스에서 시간당 접속자 수를 늘리고, 서버 부하를 줄이기 위해서는 다음이 중요하다라는 것을 알 수 있다.

- 각종 네트워크·서버 증설·재구성
- 데이터를 가져오고 처리하는 부분의 쿼리와 로직을 간소화

추가적으로 다음과 같은 아이디어를 통해서 동시성을 조금 개선 할 수도 있겠다.

- 특정 페이지(Ex. 메인)에 볼만한 컨텐츠를 제공함으로써, 신청 페이지에 몰리는 현상 막기




